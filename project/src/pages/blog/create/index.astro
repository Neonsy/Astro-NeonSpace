---
import CreatePost from '@/components/Pages/Blog/Create/index.tsx';
import Layout from '@/layouts/global/RootLayout.astro';

const user = await Astro.locals.currentUser();

const isAuthenticated = user?.privateMetadata.role === 'owner';

if (!isAuthenticated) {
    return Astro.redirect('/');
}
---

<Layout title='Create New Post'>
    <!-- Only load React for the form -->
    <CreatePost client:load />
</Layout>
