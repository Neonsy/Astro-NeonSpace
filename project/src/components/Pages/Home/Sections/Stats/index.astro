---
import { fetchGithubStats } from '@/lib/services/github';

import Stats from '@/components/Pages/Home/Sections/Stats';

// Tell the browser to always check the freshness of the cache
Astro.response.headers.set('Cache-Control', 'public, max-age=0, must-revalidate');

Astro.response.headers.set('Netlify-CDN-Cache-Control', 'public, durable, s-maxage=86400, stale-while-revalidate=604800');

const stats = await fetchGithubStats('neonsy', import.meta.env.GITHUB_TOKEN);
---

<Stats client:load stats={stats} />
